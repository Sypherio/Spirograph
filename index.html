<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spirograph Generator</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.5/lumen/bootstrap.min.css">
    <link rel="stylesheet" href="static/spirograph.css">
</style>
</head>
<body>

<br>
<br>
<div class="well col-md-8 col-md-offset-2" id="well">
	<div class="col-md-8">
		<h2 class="center">Spirograph Generator</h2>
		<canvas id="spirograph"></canvas>
	</div>
		<div class="col-md-2">
			<br>Radius 1: <input id="r1" oninput="create(false)" class="form-control"></div>
		<div class="col-md-2">
			<br>Rate 2: <input id="i2" oninput="create(false)" class="form-control"></div>
		<div class="col-md-2">
			<br>Radius 2: <input id="r2" oninput="create(false)" class="form-control"></div>
		<div class="col-md-2">
			<br>Rate 3: <input id="i3" oninput="create(false)" class="form-control"></div>
		<div class="col-md-2">
			<br>Radius 3: <input id="r3" oninput="create(false)" class="form-control"></div>
		<div class="col-md-2">
			<br>Complexity:
			<div class="btn-group form-control" role="group">
				<input id="rad1" type="radio" name="rads" onchange="create(false)"> 1 
				<input id="rad2" type="radio" name="rads" onchange="create(false)"> 2 
			</div>
		</div>
		<div class="col-md-2">
			<br><button id="custom" onclick="create(false)" class="form-control btn btn-primary">Re-Spawn!</button></div>
		<div class="col-md-2">
			<br><button id="random" onclick="create(true)" class="form-control btn btn-primary">Randomize!</button>
			<label><i>Keep clicking me for fun!</i></label></div>
	</div>
</div>

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script>
	$(document).ready(function(){
		width = $('#well').width()/3*2;
		height = $(window).height()-200;

		$("#spirograph").attr("width", width);
		$("#spirograph").attr("height", height);
		$("#rad1").prop("checked", true)

		for(i = 0; i < 50; i++){
			create(true);
		}
	});


	window.onresize = function(){
        width = $('#well').width()/3*2;
		height = $(window).height()-200;
		$("#spirograph").attr("width", width);
		$("#spirograph").attr("height", height);
	}

	function create(bool){
		var canvas = document.getElementById("spirograph").getContext("2d");
		canvas.fillStyle = "#F5F5F5";
		canvas.fillRect(0,0,spirograph.width,spirograph.height);

		if(bool){
			r1.value = String(Math.floor((Math.random() * 150) + 95));
			r2.value = String(Math.floor((Math.random() * 85) + 75));
			r3.value = String(Math.floor((Math.random() * 65) + 45));
			i2.value = String(Math.floor((Math.random() * 80) + 20));
			i3.value = String(Math.floor((Math.random() * 80) + 15));
		}

		color = String(Math.floor((Math.random() * 255) + 0));
		colorMod1 = String(Math.floor(Math.random() * 30));
		colorMod2 = String(Math.floor(Math.random() * 30));
		angle = 0;

		interval = setInterval(function(){
			if (angle>=Math.PI*2){
				clearInterval(interval);
			}
			color++;
			angle+=0.001;
			canvas.fillStyle = "rgb("+((color)%255)+", "+((color+colorMod1)%255)+", "+((color+colorMod2)%255)+")";
			x = (r1.value-r2.value)*Math.cos(angle) + i2.value*Math.cos((r1.value-r2.value)*angle/2);
 			y = (r1.value-r2.value)*Math.sin(angle) - i2.value*Math.sin((r1.value-r2.value)*angle/2);
			if(rad2.checked){
				x += i3.value*Math.cos((r2.value-r3.value)*angle/2);
 				y -= i3.value*Math.sin((r2.value-r3.value)*angle/2);
			}
			canvas.fillRect(spirograph.width/2-1+x,spirograph.height/2-1+y,1,1);
		}, 1);	
	}
</script>

</body>
</html>